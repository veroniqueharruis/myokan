---
import Base from "../layouts/Layout.astro";
import { Icon } from "astro-icon/components";

const zafus = [
  { name: "Zafu à remplir", height: "32cm", width: "20cm", price: "30€", type: "À remplir", icon: "bx:bxs-briefcase" },
  { name: "Zafu standard à remplir", height: "30cm", width: "15cm", price: "27€", type: "À remplir", icon: "bx:bxs-window-alt" },
  { name: "Zafu de voyage à remplir", height: "28cm", width: "13cm", price: "25€", type: "À remplir", icon: "bx:bxs-data" },
  { name: "Zafu plein", height: "32cm", width: "20cm", price: "40€", type: "Plein", icon: "bx:bxs-briefcase" },
  { name: "Zafu standard plein", height: "30cm", width: "15cm", price: "45€", type: "Plein", icon: "bx:bxs-window-alt" },
  { name: "Zafu de voyage plein", height: "28cm", width: "13cm", price: "50€", type: "Plein", icon: "bx:bxs-data" },
];

const zafuInfo = {
  material: "100% coton",
  colors: ["Noir", "Marron", "Rouge", "Vert", "Bleu"],
  customColors: true,
  filling: "Kapok (fibre végétale provenant du kapokier, récoltée en Asie, Amérique du Sud, Afrique)",
  customMade: true,
  orderEmail: "myokan@hotmail.fr",
};

const images = [
  "fukusa-FB_IMG_1756283080119.webp",
  "fukusa-bleu-jaune.webp",
  "fukusa-FB_IMG_1756283086911.webp",
  "fukusa-FB_IMG_1756283090242.webp",
  "fukusa-orange-gris.webp",
  "fukusa-FB_IMG_1756283102483.webp",
];
---

<Base title="Zafus artisanaux">
  <main class="mt-16 px-4 max-w-6xl mx-auto">
    <h2 class="text-4xl lg:text-5xl font-bold text-gray-800">Accessoires zen</h2>
    <p class="text-lg mt-4 text-gray-600">Les fukusas sont des pièces de tissu utilisées par les moines et nonnes zen pour protéger leur bol oryoki. </p>


    <!-- Galerie -->
    <div class="mt-12">
      <h3 class="text-2xl font-bold text-gray-800 mb-4">Galerie</h3>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
        {images.map((src, index) => (
          <img
            src={src}
            alt="Zafu"
            class="rounded-lg shadow-md w-full object-cover cursor-pointer hover:opacity-80 transition"
            data-index={index}
          />
        ))}
      </div>
    </div>
  </main>

  <!-- Lightbox -->
  <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 hidden items-center justify-center z-50">
    <button id="prev" class="absolute left-4 text-white text-3xl top-1/2 -translate-y-1/2">&#10094;</button>
    <img id="lightbox-img" src="" alt="Zafu agrandi" class="max-h-[90%] max-w-[90%] rounded-lg shadow-xl" />
    <button id="next" class="absolute right-4 text-white text-3xl top-1/2 -translate-y-1/2">&#10095;</button>
  </div>

  <script is:inline client:load>
    const images = document.querySelectorAll("[data-index]");
    const lightbox = document.getElementById("lightbox");
    const img = document.getElementById("lightbox-img");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");

    let currentIndex = 0;

    function showLightbox(index) {
      currentIndex = index;
      img.src = images[currentIndex].getAttribute("src");
      lightbox.classList.remove("hidden");
      lightbox.classList.add("flex");
    }

    function hideLightbox() {
      lightbox.classList.add("hidden");
      lightbox.classList.remove("flex");
    }

    function showPrev() {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      img.src = images[currentIndex].getAttribute("src");
    }

    function showNext() {
      currentIndex = (currentIndex + 1) % images.length;
      img.src = images[currentIndex].getAttribute("src");
    }

    images.forEach((image, index) => {
      image.addEventListener("click", () => showLightbox(index));
    });

    prevBtn.addEventListener("click", (e) => { e.stopPropagation(); showPrev(); });
    nextBtn.addEventListener("click", (e) => { e.stopPropagation(); showNext(); });
    lightbox.addEventListener("click", hideLightbox);
  </script>
</Base>
